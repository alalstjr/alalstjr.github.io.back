---
layout:     post
title:      해시 란?
author:     쭌프로
tags: 		  알고리즘 해시
subtitle:   해시 간단 요약
category:   알고리즘
---
<!-- Start Writing Below in Markdown -->


![Description]({{ site.url }}/img/ag-bg.png)

배열은 <b>내부 인덱스를 이용</b>하여 자료의 검색이 한번에 이루어지기 때문에 <b>빠른 검색 속도</b>를 보이는 반면 
데이터의 <b>삽입, 삭제시 많은 데이터가 밀리거나 빈자리를 채우기 위해 이동해야 하기 때문에 많은 시간이 소요</b>된다.

연결 리스트는 삽입, 삭제시 <b>인근 노드들의 참조값만 수정해 줌으로써 빠른 처리</b>가 가능했었다. 
단 <b>처음노드 마지막노드 이외의 위치</b>에서 데이터를 삽입, 삭제할 경우나 데이터를 검색할 경우에는 해당 노드를 찾기 위하여 
처음부터 순회검색을 해야하기 때문에 <b>데이터의 수가 많아질수록 효율이 떨어질 수 밖에 없는 구조</b>

# 해시(Hash)

  - 해시(Hash)는 데이터를 최대한 빠른 속도로 관리하도록 도와주는 자료 구조입니다. <br/>
  - 해시를 사용하면 메모리 공간이 많이 소모되지만 매우 빠른 속도로 데이터를 처리할 수 있습니다. <br/>
  - 빠르게 데이터에 접근할 수 있다는 점에서 데이터베이스 등의 소프트웨어에 활용됩니다.
  
간단한 예제를 확인해 보겠습니다.

> 입력데이터 ( 26/쭌프로 ) -> 해시 함수 (n mod 10) -> ( key:6,value:쭌프로 )

특정한 값(Value)을 찾고자 할 때는 그 값의 키(Key)로 접근할 수 있습니다. <br/>
일반적으로 해시 함수는 모듈로(Modulo) 연산 등의 수학적 연산으로 이루어져 있으므로 O(1)만에 값에 접근할 수 있습니다.

## 해시의 충돌

해시 함수의 입력 값으로는 어떠한 값이나 모두 들어갈 수 있지만, <br/>
해시 함수를 거쳐 생성되는 키(Key)의 경우의 수는 한정적이기 때문에 <br/>
<b>키(Key) 중복이 발생</b>할 수 있습니다. <br/>
해시 테이블에서 키(Key)가 중복되는 경우 <b>충돌(Collision)이 발생</b>했다고 표현합니다.

{% highlight matlab %}

  입력데이터 
  ( 26/쭌프로 ) -> 해시 함수 (n mod 10) -> ( key:6,value:쭌프로 )
  ( 46/홍길동 )                           ( key:6,value:홍길동 )
{% endhighlight %}

# 해싱(Hashing)

해싱 알고리즘은 <b>나눗셈 법(Division Method)</b>이 가장 많이 활용됩니다. <br/>
입력 값을 테이블의 크기로 나눈 나머지를 키(Key)로 이용하는 방식입니다. <br/>
<b>테이블의 크기는 소수(Prime Number)</b>로 설정하는 것이 효율성이 높습니다. <br/>
소수로 나누어 설정하는것이 확률이 적기 때문입니다.

## 충돌을 처리하는 방법

아무리 잘 만들어진 <b>해시 함수라고 해도 충돌이 발생할 수 밖에<b/> 없습니다. <br/>
충돌을 처리하는 방법은 다음과 같이 두 가지 유형으로 분류할 수 있습니다.
  
  - 충돌을 발생시키는 항목을 해시 <b>테이블의 다른 위치</b>에 저장: 선형 조사법, 이차 조사법 등..
  - 해시 테이블의 하나의 버킷(Bucket)에 <b>여러 개의 항목을 저장</b>: 체이닝(Chaining)등..

# 선형 조사법

{% highlight matlab %}

  입력데이터 
  ( 1/쭌프로 ) -> 해시 함수 (n mod 10007) -> ( key:1,value:쭌프로 )
  ( 5/홍길동 )                              ( key:5,value:홍길동 )
  ( 10012/존카멕 )                          ( key:6,value:존카멕 )
  ( 20019/스티븐 )                          ( key:7,value:스티븐 )
{% endhighlight %}

우선 첫번째 데이터 ( 1/쭌프로 ) 와 두번째 데이터 ( 5/홍길동 ) 를 먼저 키와 값을 넣습니다. <br/>
다음 ( 10012/존카멕 )은 나머지값을 Key를 넣으려고 확인해보면 홍길동 Key와 겹치는 것을 확인할 수 있습니다. <br/>
이때는 겹치는 항목의 다음 공간이 비어있다면 해당 공간에 값을 넣어줍니다.

다음 ( 20019/스티븐 )의 나머지값을 확인해면 5입니다.
홍길동의 Key와 겹치므로 다음 항목을 확인 후 존카멕항목이 존재하므로
다음 항목을 또 확인합니다. 비어있다면 해당 항목에 값을 넣습니다.

위의 예제처럼 차례대로 하나씩 확인하며 값을 넣는것을 
선형적으로 탐색한다해서 선형 조사법이라 부릅니다.

## 선형 조사법 단점

선형 조사법은 충돌이 발생하기 시작하면, 유사한 값을 가지는 데이터끼리 서로 밀집되는 <b>집중 결합<b/> 문제가 존재합니다.

물론 선형 조사법이라고 해도 <q>해시 테이블의 크기</q> 가 비약적으로 크다면, 
다시 말해 메모리를 많이 소모한다면 충돌이 적게 발생하므로 매우
빠른 데이터 접근 속도를 가질 수 있습니다.

하지만 일반적인 경우, 해시 테이블의 크기는 한정적이므로 충돌이 최대한 적게 발생하도록 해야 합니다.

# 이차 조사법 


{% highlight matlab %}

  입력데이터 
  ( 1/쭌프로 ) -> 해시 함수 (n mod 10007) -> ( key:1,value:쭌프로 )
  ( 5/홍길동 )                              ( key:5,value:홍길동 )
  ( 10012/존카멕 )                          ( key:6,value:존카멕 )
  ( 20019/스티븐 )                          빈값
                                           빈값
                                           ( key:7,value:스티븐 )
{% endhighlight %}

이차 조사법은 선형 조사법을 약간 변형한 형태로 키 값을 선택할 때 <q>완전 제곱수</q>를 더해 나가는 방식
이러면 한곳에 유사한값이 집중하는 것을 덜어줄 수 있습니다.

## 조사법의 테이블 크기 재설정

일반적으로 선형 조사법, 이차 조사법 등의 조사법에서 테이블이 가득 차게 되면 
테이블의 크기를 확장하여 계속해서 해시 테이블을 유지할 수 있도록 합니다.

# 체이닝

{% highlight matlab %}

  입력데이터 
  ( 1/쭌프로 ) -> 해시 함수 (n mod 10007) -> ( key:1,value:쭌프로 )
  ( 5/홍길동 )                              ( key:5,value:홍길동, 존카멕, 스티븐 )
  ( 10012/존카멕 )                         
  ( 20019/스티븐 )                          
{% endhighlight %}

체이닝(chaining) 기법은 연결 리스트를 활용해 특정한 키를 가지는 항목들을 연결하여 저장합니다.

연결 리스트를 사용한다는 점에서 삽입과 삭제가 용의합니다.
또한 테이블 크기 재설정 문제는 <q>동적 할당</q>을 통해서 손쉽게 해결할 수 있습니다.
다만 동적 할당을 위한 추가적인 메모리 공간이 소모된다는 단점이 있습니다.

# C언어 Hash Table 예제

<a href="https://github.com/alalstjr/C-Language/tree/master/Hash">예제 코드</a>

# JAVA Hash Table 예제

외국 유명 유튜버 Derek Banas님의 Hash Table 강좌를 보고 개인적으로 이해하고 주석을 달아놓은 코드입니다. <br/>
영어가 잘 안되기 때문에 지금까지 공부해온 Hash를 기반으로 작성한 쭌(뇌)피셜 주석입니다.

<a href="https://github.com/alalstjr/Java-study/blob/master/190524-Hash%20Table/HashFunction.java">예제 코드</a>

# 참고자료

<a href="https://hyeonstorage.tistory.com/265">[개발이 하고 싶어요]Java 해쉬(Hash) 기본 개념과 구조 (분리연결법)</a>
<a href="https://codeman77.tistory.com/64">[ Java ] 배열 다루기 ( Arrays Class )</a>

## JAVA Hash Table 
<a href="https://youtu.be/B4vqVDeERhI">Derek Banas님의 유튜브 Java Hash Table</a>
